# catrina-bundler
A mini-bundler for [catrina](https://github.com/PROMUEVETE-QUERETARO/catrina)

## Install (Linux only)
...
## Start project

```shell
$ catrina new myProject
```

This command make a new directory with the name of the project and the library includes in catrina. Then the tool will question you if you wish to start the wizard; if you input "n", the new project will have the standard configuration.

```shell
$ catrina new my-project -s
```

Whit the `-s` flag you create a new project with the standard configuration.

### Configuration

The catrina's configuration is read in **catrina.config.json** file. You can set this configuration using the wizard setup was run after `catrina new` command or make yourself the file.

The file's structure is the next (this values are the _standard configuration_):

```json
{
  "inputFileJS": "input.js",
  "inputFileCSS": "input.css",
  "deployPath": "./deploy",
  "finalFileJS": "main.js",
  "finalFileCSS": "styles.css",
  "serverPort": ":9095",
  "versionLib": "v1.2.0"
}
```

* inputFileJS: initial javascript file where you write your code.
* inputFileCSS: initial CSS file where you write your code.
* deployPath: directory where you want build the final files.
* finalFileJS: name of final javascript file generated by catrina.
* finalFileCSS: name of final CSS file generated by catrina.
* serverPort: port where proof server will be started (command `catrina run`).
* versionLib: the standard library version, you can secure modify this field with the command `catrina get <version>`

***Important***: *deploy path and input path can be the same directory, but the final files must have a different names than the inputs files.*

### Wizard

This tool runs after the `new` command ─ if you don't use the` -s`─ flag, and is used to manually configure the project settings. The fields that are not explicitly modified will be taken from the standard configuration.

## Build project

Catrina 

```shell
$ catrina build
```

## Start server

Run a proof server in deploy path defined in configuration file.

```shell
$ catrina run
```

## Update standard library

If you want actualized the standard library in a project run the next command. 


```sh
$ catrina update lib
```

**Note**: this action delete other libraries installed in the project.

## Update catrina

Run the update tool with the next command:

```sh
$ catrina-update
```

## TODO
* run extra scripts (included in `catrina build`)
* install extra js libraries (`catrina install <path>`)
* compile for WebAssembly
* check compatibility with Nodejs, Deno or Wasmerio

## Why Rust Port?

The original code was written in Golang. The program was fast and lightweight, but cross-compiling was a maintenance issue. Also, being a tool for the javascript environment, it would be better if it could run in Nodejs -and be distributed by npm-.
The solution has been to look for the compilation to Webassembly, for which Rust is a better option than Golang.